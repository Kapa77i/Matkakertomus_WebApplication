@page "/user"
@using System.Net.Http
@using System.Net.Http.Json
@using System.Threading.Tasks

@inject HttpClient Http

<h1>Käyttäjä</h1>
@if (user != null)
{
<div class="palsta"> 
          <form>
    <div class="form-group">
        <label for="id">ID</label>
            <input type="text" class="form-control" id="id" disabled value="@user.idmatkaaja.ToString()" >
    </div>
    <div class="form-group">
        <label for="etunimi">Etunimi</label>
            <input type="text" class="form-control" id="etunimi" @bind-value="user.etunimi">
    </div>
    <div class="form-group">
        <label for="sukunimi">Sukunimi</label>
            <input type="text" class="form-control" id="sukunimi" @bind-value="user.sukunimi">
    </div>
    <div class="form-group">
        <label for="nimimerkki">Nimimerkki</label>
            <input type="text" class="form-control" id="nimimerkki" @bind-value="user.nimimerkki">
    </div>
    <div class="form-group">
        <label for="paikkakunta">Paikkakunta</label>
            <input type="text" class="form-control" id="paikkakunta" @bind-value="user.paikkakunta" >
    </div>
    <div class="form-group">
        <label for="esittely">Esittely</label>
            <textarea class="form-control" id="esittely" @bind="user.esittely"></textarea>
    </div>
            <div class="form-group">
                <label for="kuva">Kuva</label>
                <table id="kuva" style="background-color: transparent;" align="center" valign="middle" border="0">
                    <tr>
                        <td align="center" valign="middle"><img src="profilePictures/1.png" width="133" height="133" alt="1" /></td>
                        <td align="center" valign="middle"><img src="profilePictures/2.png" width="133" height="133" alt="2" /></td>
                        <td align="center" valign="middle"><img src="profilePictures/3.png" width="133" height="133" alt="3" /></td>
                        <td align="center" valign="middle"><img src="profilePictures/4.png" width="133" height="133" alt="4" /></td>
                    </tr>
                    <tr>
                        <td align="center" valign="middle"><input type="radio" name="user.kuva" Value="1.png" checked/></td>
                        <td align="center" valign="middle"><input type="radio" name="user.kuva" value="2.png" /></td>
                        <td align="center" valign="middle"><input type="radio" name="user.kuva" value="3.png" /></td>
                        <td align="center" valign="middle"><input type="radio" name="user.kuva" value="4.png" /></td>
                    </tr>
                    <tr>
                        <td align="center" valign="middle"><img src="profilePictures/5.png" width="133" height="133" alt="5.png" /></td>
                        <td align="center" valign="middle"><img src="profilePictures/6.png" width="133" height="133" alt="6.png" /></td>
                        <td align="center" valign="middle"><img src="profilePictures/7.png" width="133" height="133" alt="7.png" /></td>
                        <td align="center" valign="middle"><img src="profilePictures/8.png" width="133" height="133" alt="8.png" /></td>
                    </tr>
                    <tr>
                        <td align="center" valign="middle"><input type="radio" name="user.kuva" value="5.png" /></td>
                        <td align="center" valign="middle"><input type="radio" name="user.kuva" value="6.png" /></td>
                        <td align="center" valign="middle"><input type="radio" name="user.kuva" value="7.png" /></td>
                        <td align="center" valign="middle"><input type="radio" name="user.kuva" value="8.png" /></td>
                    </tr>
                    <tr>
                        <td align="center" valign="middle"><img src="profilePictures/9.png" width="133" height="133" alt="9" /></td>
                        <td align="center" valign="middle"><img src="profilePictures/10.png" width="133" height="133" alt="10" /></td>
                        <td align="center" valign="middle"><img src="profilePictures/11.png" width="133" height="133" alt="11" /></td>
                        <td align="center" valign="middle"><img src="profilePictures/12.png" width="133" height="133" alt="12" /></td>
                    </tr>
                    <tr>
                        <td align="center" valign="middle"><input type="radio" name="user.kuva" value="9.png" /></td>
                        <td align="center" valign="middle"><input type="radio" name="user.kuva" value="10.png" /></td>
                        <td align="center" valign="middle"><input type="radio" name="user.kuva" value="11.png" /></td>
                        <td align="center" valign="middle"><input type="radio" name="user.kuva" value="12.png" /></td>
                    </tr>
                    <tr>
                        <td align="center" valign="middle"><img src="profilePictures/13.png" width="133" height="133" alt="13" /></td>
                        <td align="center" valign="middle"><img src="profilePictures/14.png" width="133" height="133" alt="14" /></td>
                        <td align="center" valign="middle"><img src="profilePictures/15.png" width="133" height="133" alt="15" /></td>
                        <td align="center" valign="middle"><img src="profilePictures/16.png" width="133" height="133" alt="16" /></td>
                    </tr>
                    <tr>
                        <td align="center" valign="middle"><input type="radio" name="user.kuva" value="13.png" /></td>
                        <td align="center" valign="middle"><input type="radio" name="user.kuva" value="14.png" /></td>
                        <td align="center" valign="middle"><input type="radio" name="user.kuva" value="15.png" /></td>
                        <td align="center" valign="middle"><input type="radio" name="user.kuva" value="16.png" /></td>
                    </tr>
                </table>
    </div>
           <button type="submit" class="btn btn-primary" style="margin-top: 10px;" @onclick="UpdateUser">Päivitä</button>
    </form>
        
</div>

    


 
}else
{
<h2>  <img src="/images/loading.gif" width="133" /></h2>

}
@*voi päivittää omia tietojaan (matkaaja-taulu). 
Sähköpostin ja salasanan muuttamista ei tarvitse sallia, 
mutta jos sen sallii, niin se pitää huomioida kirjautumisessa.*@

@code {
    [Parameter]
    public int Id { get; set; }

    private SharedLib.matkaajaDTO? user;
   

   
    protected override async Task OnInitializedAsync() =>
    user = await Http.GetFromJsonAsync<SharedLib.matkaajaDTO>($"api/Matkaajas/1");

    private async Task UpdateUser()
    {
        await Http.PutAsJsonAsync($"api/Matkaajas/1", user);
    }


}
